package eubr.atmosphere.tma.planning
 
dialect "mvel"

import eubr.atmosphere.tma.planning.AdaptationManager
import eubr.atmosphere.tma.data.Action
import eubr.atmosphere.tma.utils.Score


declare Score
      @role(event)
      //@expires(1s)
      //@timestamp (eventDestinationTimestamp)
 end


/*rule "Score validation number"
    when
        $number: Number ( )
    then
        System.out.println( "The current score is: " + $number.toString());
end*/

rule "Score validation"
    when
        $score: Score ( score > 0.4 )
    then
        Action action = new Action("[Score A] High score: " + $score.toString(), 11);
        AdaptationManager.performAdaptation( action );
end

/*rule "Score validation average"
    when
        Number( avg : doubleValue > 0.35 ) from accumulate(
		Score( $my_score : score ) over window:length( 5 ),
		average ( $my_score ) )
    then
        System.out.println(avg);
        Action action = new Action("[Score B] Average-high ", 8);
        AdaptationManager.performAdaptation( action );
end*/
